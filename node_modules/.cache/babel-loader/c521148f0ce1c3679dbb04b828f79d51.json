{"ast":null,"code":"import _defineProperty from \"/Users/arumgaladima/appserve_01/rps/web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/arumgaladima/appserve_01/rps/web/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/arumgaladima/appserve_01/rps/web/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/arumgaladima/appserve_01/rps/web/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/arumgaladima/appserve_01/rps/web/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/arumgaladima/appserve_01/rps/web/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/arumgaladima/appserve_01/rps/web/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/arumgaladima/appserve_01/rps/web/src/components/Login.js\";\nimport React, { Component } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { admin } from '../firebase.js';\nimport * as firebase from 'firebase';\nimport Alert from 'react-s-alert';\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n    _this.state = {\n      email: '',\n      password: '',\n      redirect: false,\n      loading: true\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.signin = _this.signin.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.googleSignin = _this.googleSignin.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.passwordReset = _this.passwordReset.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      var target = e.target;\n      var value = target.type === 'checkbox' ? target.checked : target.value;\n      var name = target.name;\n      this.setState(_defineProperty({}, name, value));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      admin.auth().onAuthStateChanged(function (user) {\n        // console.log(user);\n        if (user != null) {\n          _this2.setState({\n            redirect: true\n          });\n        }\n      });\n    }\n  }, {\n    key: \"signin\",\n    value: function signin(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      admin.auth().signInWithEmailAndPassword(this.state.email, this.state.password).then(function (user, error) {\n        if (user) {\n          _this3.setState({\n            redirect: true,\n            loading: false\n          });\n\n          console.log('state in redirect:', _this3.state.redirect);\n        } else {\n          console.log(error);\n        }\n      }).catch(function (error) {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message; // [START_EXCLUDE]\n\n        if (errorCode === 'auth/wrong-password') {\n          alert('Wrong password.');\n        } else {\n          alert(errorMessage);\n        }\n      });\n    }\n  }, {\n    key: \"passwordReset\",\n    value: function passwordReset() {\n      admin.sendPasswordResetEmail(this.state.email).then(function () {\n        // Success on password reset email\n        Alert.success('Check your email for a link to reset your password', {\n          position: 'bottom-right',\n          effect: 'slide',\n          timeout: 'none'\n        });\n      }).catch(function (error) {// Log error\n      });\n    }\n  }, {\n    key: \"googleSignin\",\n    value: function googleSignin(e) {\n      e.preventDefault();\n      var provider = new firebase.auth.GoogleAuthProvider();\n      var userUser;\n      firebase.auth().signInWithPopup(provider).then(function (result) {\n        // This gives you a Google Access Token. You can use it to access the Google API.\n        var token = result.credential.accessToken; // The signed-in user info.\n\n        var user = result.user;\n        userUser = user.displayName; // ...\n\n        if (userUser.length > 0) {\n          this.setState({\n            redirect: true,\n            loading: false\n          });\n          console.log('state in redirect:', this.state.redirect);\n        }\n\n        console.log(user.displayName);\n      }).catch(function (error) {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message; // The email of the user's account used.\n\n        var email = error.email; // The firebase.auth.AuthCredential type that was used.\n\n        var credential = error.credential; // ...\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      e.preventDefault();\n      this.signin(e); // this.databaseRecord();\n\n      console.log('The form was submitted with the following data:'); // console.log(this.state);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.redirect === true) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"FormCenter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        className: \"FormFields\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"FormField\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"FormField__Label\",\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"E-Mail Address\"), React.createElement(\"input\", {\n        type: \"email\",\n        id: \"email\",\n        className: \"FormField__Input\",\n        placeholder: \"Enter your email\",\n        name: \"email\",\n        value: this.state.email,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"FormField\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"FormField__Label\",\n        htmlFor: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Password\"), React.createElement(\"input\", {\n        type: \"password\",\n        id: \"password\",\n        className: \"FormField__Input\",\n        placeholder: \"Enter your password\",\n        name: \"password\",\n        value: this.state.password,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"FormField\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"FormField__Button mr-20\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"Sign In\"), React.createElement(\"div\", {\n        onClick: this.googleSignin,\n        className: \"FormField__Link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"Sign In with Google\"))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default Login;","map":{"version":3,"sources":["/Users/arumgaladima/appserve_01/rps/web/src/components/Login.js"],"names":["React","Component","Link","Redirect","admin","firebase","Alert","Login","props","state","email","password","redirect","loading","handleChange","bind","handleSubmit","signin","googleSignin","passwordReset","e","target","value","type","checked","name","setState","auth","onAuthStateChanged","user","preventDefault","signInWithEmailAndPassword","then","error","console","log","catch","errorCode","code","errorMessage","message","alert","sendPasswordResetEmail","success","position","effect","timeout","provider","GoogleAuthProvider","userUser","signInWithPopup","result","token","credential","accessToken","displayName","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { admin } from '../firebase.js';\nimport * as firebase from 'firebase';\nimport Alert from 'react-s-alert';\n\n\nclass Login extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            email: '',\n            password: '',\n            redirect: false,\n            loading: true\n        };\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.signin = this.signin.bind(this);\n        this.googleSignin = this.googleSignin.bind(this);\n        this.passwordReset = this.passwordReset.bind(this);\n    }\n\n    handleChange(e) {\n      let target = e.target;\n      let value = target.type === 'checkbox' ? target.checked : target.value;\n      let name = target.name;\n\n      this.setState({\n        [name]: value\n      });\n    }\n\n    componentDidMount(){\n      admin.auth().onAuthStateChanged((user) => {\n        // console.log(user);\n        if(user != null) {\n          this.setState({redirect: true});\n        }\n      });\n    }\n\n    signin(e){\n      e.preventDefault();\n      admin.auth().signInWithEmailAndPassword(this.state.email, this.state.password)\n      .then((user, error) => {\n        if (user) {\n          this.setState({redirect: true, loading: false});\n          console.log('state in redirect:', this.state.redirect);\n        } else {\n          console.log(error);\n        }\n      })\n      .catch(function(error) {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        // [START_EXCLUDE]\n        if (errorCode === 'auth/wrong-password') {\n          alert('Wrong password.');\n        } else {\n          alert(errorMessage);\n        }\n      });\n    }\n\n    passwordReset() {\n      admin.sendPasswordResetEmail(this.state.email).then(function() {\n        // Success on password reset email\n        Alert.success('Check your email for a link to reset your password', {\n            position: 'bottom-right',\n            effect: 'slide',\n            timeout: 'none'\n        });\n\n      }).catch(function(error) {\n        // Log error\n      });\n    }\n\n    googleSignin(e) {\n      e.preventDefault();\n      var provider = new firebase.auth.GoogleAuthProvider();\n      var userUser;\n      firebase.auth().signInWithPopup(provider).then(function(result) {\n        // This gives you a Google Access Token. You can use it to access the Google API.\n        var token = result.credential.accessToken;\n        // The signed-in user info.\n        var user = result.user;\n        userUser = user.displayName;\n        // ...\n        if(userUser.length > 0) {\n          this.setState({redirect: true, loading: false});\n          console.log('state in redirect:', this.state.redirect);\n        }\n        console.log(user.displayName);\n      }).catch(function(error) {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        // The email of the user's account used.\n        var email = error.email;\n        // The firebase.auth.AuthCredential type that was used.\n        var credential = error.credential;\n        // ...\n      });\n    }\n\n    handleSubmit(e) {\n      e.preventDefault();\n      this.signin(e);\n      // this.databaseRecord();\n      console.log('The form was submitted with the following data:');\n      // console.log(this.state);\n    }\n\n    render() {\n      if(this.state.redirect === true) {\n        return <Redirect to='/' />\n      }\n      return (\n      <div className=\"FormCenter\">\n          <form onSubmit={this.handleSubmit} className=\"FormFields\">\n          <div className=\"FormField\">\n              <label className=\"FormField__Label\" htmlFor=\"email\">E-Mail Address</label>\n              <input type=\"email\" id=\"email\" className=\"FormField__Input\" placeholder=\"Enter your email\" name=\"email\" value={this.state.email} onChange={this.handleChange} />\n            </div>\n\n            <div className=\"FormField\">\n              <label className=\"FormField__Label\" htmlFor=\"password\">Password</label>\n              <input type=\"password\" id=\"password\" className=\"FormField__Input\" placeholder=\"Enter your password\" name=\"password\" value={this.state.password} onChange={this.handleChange} />\n            </div>\n\n            <div className=\"FormField\">\n              <button className=\"FormField__Button mr-20\">Sign In</button><div onClick={this.googleSignin} className=\"FormField__Link\">Sign In with Google</div>\n            </div>\n          </form>\n        </div>\n      );\n    }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}